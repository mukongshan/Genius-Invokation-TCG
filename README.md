# 原神七圣召唤 - Genius Invokation TCG

一个基于C语言和SDL2库开发的回合制卡牌游戏，灵感来源于《原神》的七圣召唤玩法。

## 📋 目录

- [系统要求](#系统要求)
- [编译和运行](#编译和运行)
- [游戏操作指南](#游戏操作指南)
- [游戏规则](#游戏规则)
- [项目结构](#项目结构)
- [技术栈](#技术栈)

## 🖥️ 系统要求

- **操作系统**: Windows 10/11
- **编译器**: MinGW-w64 (GCC)
- **构建工具**: CMake 3.26 或更高版本
- **依赖库**: 
  - SDL2 2.28.2
  - SDL2_image
  - SDL2_ttf
  - SDL2_mixer

## 🔨 编译和运行

### 方法一：使用CLion（推荐）

1. 打开CLion IDE
2. 选择 `File` → `Open`，选择项目根目录
3. CLion会自动检测CMakeLists.txt并配置项目
4. 点击运行按钮（绿色三角形）或按 `Shift+F10` 编译并运行

### 方法二：使用命令行

#### Windows (MinGW)

```bash
# 创建构建目录
mkdir build
cd build

# 配置项目
cmake .. -G "MinGW Makefiles"

# 编译
mingw32-make

# 运行（确保在项目根目录）
cd ..
build\Genius-Invokation-TCG.exe
```

#### 注意事项

- 确保SDL2的DLL文件（`SDL2.dll`, `SDL2_image.dll`, `SDL2_ttf.dll`, `SDL2_mixer.dll`）在可执行文件同目录下
- 确保资源文件夹 `res` 在可执行文件同目录下
- 如果遇到找不到DLL的错误，请将DLL文件复制到可执行文件所在目录

## 🎮 游戏操作指南

### 主菜单

- **鼠标左键**: 开始游戏

### 角色选择阶段

- **鼠标左键**: 点击角色卡片选择/取消选择角色
- **Enter键**: 确认选择并进入战斗（至少选择一个角色）

### 战斗阶段

#### 角色选择

- **← 左方向键**: 切换到上一个角色
- **→ 右方向键**: 切换到下一个角色
- **Enter键**: 选择当前角色作为出战角色
  - 首次选择：免费
  - 切换角色：消耗1点行动点

#### 角色技能

当角色处于战斗状态时，可以使用以下技能：

- **1键**: 普通攻击（消耗3点行动点）
- **2键**: 元素战技（消耗3点行动点，部分角色消耗不同）
- **3键**: 元素爆发（消耗3-4点行动点，需要足够的充能值）

#### 其他操作

- **Space键**: 结束当前回合
- **Tab键**: 退出角色战斗界面（取消当前操作）
- **鼠标悬停**: 悬停在角色上查看角色介绍
- **ESC键**: 退出游戏

### 回合结束

- **Enter键**: 确认并继续下一回合

### 游戏结束

- **鼠标左键**: 退出游戏

## 📖 游戏规则

### 游戏目标

- **胜利条件**: 击败敌方角色（魔偶剑鬼）
- **失败条件**: 所有己方角色生命值归零

### 角色系统

#### 玩家角色

1. **班尼特 (Bennett)**
   - 普通攻击：造成2点伤害
   - 元素战技：造成3点火元素伤害
   - 元素爆发：造成2点火元素伤害，获得"鼓舞领域"效果（持续2回合）

2. **行秋 (Xingqiu)**
   - 普通攻击：造成2点伤害
   - 元素战技：造成2点水元素伤害，获得"雨帘剑"效果（持续2回合）
   - 元素爆发：造成2点水元素伤害，获得"雨帘剑"和"虹剑势"效果

3. **宵宫 (Yoimiya)**
   - 普通攻击：造成2点伤害
   - 元素战技：获得"庭火延烧"效果（持续2回合）
   - 元素爆发：造成3点火元素伤害，获得"流金火光"效果（持续2回合）

#### 敌方角色

- **魔偶剑鬼 (Maguu Kenki)**
  - 拥有30点生命值
  - 会使用普通攻击、元素战技和元素爆发
  - 可以召唤"孤风"和"霜驰"召唤物

### 行动点系统

- 每回合开始时，双方各获得8点行动点
- 使用技能会消耗行动点
- 行动点不足时无法使用技能

### 元素反应系统

游戏包含多种元素反应：

- **蒸发 (Evaporative)**: 火+水，增加2点伤害
- **冻结 (Freeze)**: 水+冰，增加1点伤害，目标获得冻结状态
- **扩散 (Diffuse)**: 风元素，对周围角色造成元素伤害
- 更多元素反应等待探索...

### 召唤物系统

- 召唤物会在回合结束时自动攻击
- 召唤物有持续回合数，回合结束后消失

### 回合流程

1. **玩家回合**
   - 选择角色
   - 使用技能
   - 结束回合（按Space键）

2. **敌方回合**
   - AI自动行动

3. **回合结算**
   - 召唤物攻击
   - 技能效果结算
   - 清除异常状态（部分）
   - 开始新回合

## 📁 项目结构

```
Genius-Invokation-TCG/
├── CMakeLists.txt          # 主CMake配置文件
├── README.md               # 本文件
├── include/                # 头文件目录
│   ├── common.h           # 通用定义和结构
│   ├── game.h             # 游戏逻辑头文件
│   ├── game_state.h       # 游戏状态管理
│   ├── role.h             # 角色系统
│   ├── choice.h           # 选择系统
│   ├── elemental_reaction.h # 元素反应系统
│   └── utils/             # 工具类头文件
│       ├── display.h      # 显示系统
│       ├── input.h        # 输入处理
│       ├── word.h         # 文字渲染
│       ├── audio.h        # 音频系统
│       ├── layout.h       # 布局管理
│       └── resource.h     # 资源管理
├── src/                   # 源文件目录
│   ├── main.c             # 程序入口
│   ├── game.c             # 游戏主逻辑
│   ├── role.c             # 角色实现
│   ├── choice.c           # 选择系统实现
│   ├── game_state.c       # 状态管理实现
│   ├── elemental_reaction.c # 元素反应实现
│   └── utils/             # 工具类实现
│       ├── display.c
│       ├── input.c
│       ├── word.c
│       ├── audio.c
│       ├── layout.c
│       └── resource.c
├── res/                   # 资源文件目录
│   ├── img/               # 图像资源
│   ├── music/             # 音频资源
│   └── typeface/          # 字体文件
└── SDL2-2.28.2/           # SDL2库文件
```

## 🛠️ 技术栈

- **语言**: C99
- **图形库**: SDL2
- **图像处理**: SDL2_image
- **字体渲染**: SDL2_ttf
- **音频**: SDL2_mixer
- **构建系统**: CMake

## 🎯 游戏特色

- ✨ 完整的元素反应系统
- 🎨 精美的游戏界面和动画效果
- 🎵 背景音乐支持
- 📱 自适应窗口大小，支持不同分辨率
- 🎮 流畅的操作体验

## ⚠️ 注意事项

1. **资源文件**: 确保 `res` 文件夹与可执行文件在同一目录
2. **DLL文件**: 确保SDL2相关的DLL文件在可执行文件目录下
3. **窗口大小**: 游戏会自动适应屏幕大小，最小支持1280x720分辨率
4. **性能**: 如果遇到卡顿，可以尝试降低窗口大小

## 🐛 已知问题

- 部分动画在窗口缩放后可能需要微调
- 某些元素反应的视觉效果可能需要优化

## 📝 开发说明

本项目采用模块化设计：

- **布局系统**: 统一管理UI位置，支持响应式布局
- **状态管理**: 集中管理游戏状态
- **资源管理**: 统一加载和管理游戏资源
- **元素反应**: 使用查找表优化反应判断

## 📄 许可证

本项目仅供学习和研究使用。

## 👥 贡献

欢迎提交Issue和Pull Request！

---

**祝游戏愉快！** 🎉

